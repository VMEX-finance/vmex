{
  "title": "LendingPool: Borrow/repay (stable rate) custom test 1",
  "description": "Test cases for the borrow function, stable mode.",
  "stories": [
    {
      "description": "User 0 deposits 300 DAI (risk 0) in all three tranches",
      "actions": [
        {
          "name": "mint",
          "args": {
            "reserve": "DAI",
            "amount": "1000",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "approve",
          "args": {
            "reserve": "DAI",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "deposit",
          "args": {
            "reserve": "DAI",
            "tranche": "0",
            "amount": "300",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "deposit",
          "args": {
            "reserve": "DAI",
            "tranche": "1",
            "amount": "300",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "deposit",
          "args": {
            "reserve": "DAI",
            "tranche": "2",
            "amount": "300",
            "user": "0"
          },
          "expected": "success"
        }
      ]
    },
    {
      "description": "user 1 deposits 1 WETH (risk 1) as collateral in tranche 2 and borrows 100 DAI at stable rate. Tries to borrow from tranches 0 and 1 (revert) ",
      "actions": [
        {
          "name": "mint",
          "args": {
            "reserve": "WETH",
            "amount": "1",
            "user": "1"
          },
          "expected": "success"
        },
        {
          "name": "approve",
          "args": {
            "reserve": "WETH",
            "user": "1"
          },
          "expected": "success"
        },
        {
          "name": "deposit",
          "args": {
            "reserve": "WETH",
            "tranche": "2",  
            "amount": "1",
            "user": "1"
          },
          "expected": "success"
        },
        {
          "name": "setUseAsCollateral",
          "args": {
            "reserve": "WETH",
            "tranche": "2",
            "useAsCollateral" : "true",
            "amount": "1",
            "user": "1"
          },
          "expected": "success"
        },
        {
          "name": "borrow",
          "args": {
            "reserve": "DAI",
            "tranche": "0",
            "amount": "100",
            "borrowRateMode": "stable",
            "user": "1",
            "timeTravel": "365"
          },
          "expected": "revert"
        },
        {
          "name": "borrow",
          "args": {
            "reserve": "DAI",
            "tranche": "1",
            "amount": "100",
            "borrowRateMode": "stable",
            "user": "1",
            "timeTravel": "365"
          },
          "expected": "revert"
        }
      ]
    },
    {
      "description": "user 1 borrows 100 DAI at stable rate. ",
      "actions": [
        {
          "name": "borrow",
          "args": {
            "reserve": "DAI",
            "tranche": "2",
            "amount": "100",
            "borrowRateMode": "stable",
            "user": "1",
            "timeTravel": "365"
          },
          "expected": "success"
        }
      ]
    },
    {
      "description": "user 0 tries to withdraw all 300 in tranche 2 (revert). ",
      "actions": [
        {
          "name": "withdraw",
          "args": {
            "reserve": "DAI",
            "tranche": "2",
            "amount": "300",
            "user": "0"
          },
          "expected": "revert"
        }
      ]
    },
    {
      "description": "user 0 tries to withdraw 200 in tranche 2 (success). ",
      "actions": [
        {
          "name": "withdraw",
          "args": {
            "reserve": "DAI",
            "tranche": "2",
            "amount": "200",
            "user": "0"
          },
          "expected": "success"
        }
      ]
    },
    {
      "description": "user 0 tries to withdraw 300 in tranche 1 (success). ",
      "actions": [
        {
          "name": "withdraw",
          "args": {
            "reserve": "DAI",
            "tranche": "1",
            "amount": "300",
            "user": "0"
          },
          "expected": "success"
        }
      ]
    }

  ]
}
