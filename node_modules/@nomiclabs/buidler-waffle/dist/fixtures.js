"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function createFixtureLoader(overrideWallets, provider) {
    const snapshots = [];
    return async function load(fixture) {
        const snapshot = snapshots.find((p) => p.fixture === fixture);
        if (snapshot !== undefined) {
            await snapshot.provider.send("evm_revert", [snapshot.id]);
            snapshot.id = await snapshot.provider.send("evm_snapshot", []);
            return snapshot.data;
        }
        {
            const wallets = overrideWallets !== null && overrideWallets !== void 0 ? overrideWallets : provider.getWallets();
            const data = await fixture(wallets, provider);
            const id = await provider.send("evm_snapshot", []);
            snapshots.push({ fixture, data, id, provider, wallets });
            return data;
        }
    };
}
function buidlerCreateFixtureLoader(buidlerWaffleProvider, overrideWallets, overrideProvider) {
    return createFixtureLoader(overrideWallets, overrideProvider !== null && overrideProvider !== void 0 ? overrideProvider : buidlerWaffleProvider);
}
exports.buidlerCreateFixtureLoader = buidlerCreateFixtureLoader;
//# sourceMappingURL=fixtures.js.map