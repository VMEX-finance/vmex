{
  "title": "LendingPool: Borrow/repay (stable rate) custom test 2",
  "description": "Test cases for the borrow function, stable mode.",
  "stories": [
    {
      "description": "User 0 deposits DAI in all three tranches. User 1 deposits 1 WETH (risk 1) in tranche 0. ",
      "actions": [
        {
          "name": "mint",
          "args": {
            "reserve": "DAI",
            "amount": "1000",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "approve",
          "args": {
            "reserve": "DAI",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "deposit",
          "args": {
            "reserve": "DAI",
            "tranche": "0",
            "amount": "300",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "deposit",
          "args": {
            "reserve": "DAI",
            "tranche": "1",
            "amount": "300",
            "user": "0"
          },
          "expected": "success"
        },
        {
          "name": "deposit",
          "args": {
            "reserve": "DAI",
            "tranche": "2",
            "amount": "300",
            "user": "0"
          },
          "expected": "success"
        }        
      ]
    },
    {
      "description": "User 1 should not be able to deposit tranche 0 as collateral. ",
      "actions": [
        {
          "name": "mint",
          "args": {
            "reserve": "WETH",
            "amount": "1",
            "user": "1"
          },
          "expected": "success"
        },
        {
          "name": "approve",
          "args": {
            "reserve": "WETH",
            "user": "1"
          },
          "expected": "success"
        },
        {
          "name": "deposit",
          "args": {
            "reserve": "WETH",
            "tranche": "0",  
            "isCollateral": "true",
            "amount": "1",
            "user": "1"
          },
          "expected": "revert"
        }
      ]
    },
    {
      "description": "User 1 should not be able to set tranche 0 as collateral. ",
      "actions": [
        {
          "name": "setUseAsCollateral",
          "args": {
            "reserve": "WETH",
            "useAsCollateral" : "true",
            "amount": "1",
            "user": "1"
          },
          "expected": "revert"
        }
      ]
    },
    {
      "description": "User 1 should not be able to borrow anything. ",
      "actions": [
        {
          "name": "borrow",
          "args": {
            "reserve": "DAI",
            "tranche": "0",
            "amount": "100",
            "borrowRateMode": "stable",
            "user": "1",
            "timeTravel": "365"
          },
          "expected": "revert"
        },
        {
          "name": "borrow",
          "args": {
            "reserve": "DAI",
            "tranche": "0",
            "amount": "100",
            "borrowRateMode": "stable",
            "user": "1",
            "timeTravel": "365"
          },
          "expected": "revert"
        },
        {
          "name": "borrow",
          "args": {
            "reserve": "DAI",
            "tranche": "2",
            "amount": "100",
            "borrowRateMode": "stable",
            "user": "1",
            "timeTravel": "365"
          },
          "expected": "revert"
        }
      ]
    }
    
  ]
}
